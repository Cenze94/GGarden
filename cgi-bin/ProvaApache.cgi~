#!/usr/bin/perl
use XML::LibXSLT;
use XML::LibXML;

my $filexslt="../XML/database.xslt";
my $filexml="../XML/database.xml";
my $word="Zappetta a cuore";
my $xpath="prodotti/attrezzo[nome='Zappetta a cuore']";

my $parserxml = XML::LibXML->new();
my $parserxslt = XML::LibXSLT->new();

my $xslt = $parserxml->parse_file($filexslt);
my $doc = $parserxml->parse_file($filexml);

my $stylesheet = $parserxslt->parse_stylesheet($xsl);
my $results = $stylesheet->transform($doc);

#my @prova = $doc->getElementsByTagName("attrezzo");
#my @test = $prova[1]->childNodes();
#$prova->unbindNode;
#my $parser = XML::LibXML->new();
#my $xmldoc = $parser->parse_file($filexml);
#for my $dead ($xmldoc->findnodes(q{/})) {
#    $dead->unbindNode;
#}

#my $root = $doc->findnodes("/")->get_node(0);
#my $book = $root->find("//attrezzo[nome = 'Zappetta a cuore']")->get_node(0);
#my $library=$book->parentNode;
#$library->removeChild($book);

print header('text/xml');
print $stylesheet->output_string($results);
